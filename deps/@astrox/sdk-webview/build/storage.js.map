{"version":3,"sources":["../../src/storage.ts"],"sourcesContent":["import { AbstractedClientStorage } from '@astrox/sdk-core';\n\nexport class ICStorage implements AbstractedClientStorage {\n  constructor(public readonly prefix = 'astrox-', private readonly _localStorage?: Storage) {}\n\n  public get(key: string): Promise<string | null> {\n    return Promise.resolve(this._getICStorage().getItem(this.prefix + key));\n  }\n\n  public set(key: string, value: string): Promise<void> {\n    this._getICStorage().setItem(this.prefix + key, value);\n    return Promise.resolve();\n  }\n\n  public remove(key: string): Promise<void> {\n    this._getICStorage().removeItem(this.prefix + key);\n    return Promise.resolve();\n  }\n\n  private _getICStorage() {\n    if (this._localStorage) {\n      return this._localStorage;\n    }\n\n    const ls =\n      typeof window === 'undefined'\n        ? typeof global === 'undefined'\n          ? typeof self === 'undefined'\n            ? undefined\n            : self.localStorage\n          : global.localStorage\n        : window.localStorage;\n\n    if (!ls) {\n      throw new Error('Could not find local storage.');\n    }\n\n    return ls;\n  }\n}\n"],"names":["ICStorage","prefix","_localStorage","get","key","Promise","resolve","_getICStorage","getItem","set","value","setItem","remove","removeItem","ls","window","global","self","undefined","localStorage","Error"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,OAAO,IAAA,AAAMA,0BAAN;;aAAMA;YACC,AAAgBC,SAAhB,iEAAyB,WAAW,AAAiBC;gCADtDF;;;aACiBC,SAAAA;aAAqCC,gBAAAA;;kBADtDF;;YAGJG,KAAAA;mBAAP,SAAOA,IAAIC,GAAW;gBACpB,OAAOC,QAAQC,OAAO,CAAC,IAAI,CAACC,aAAa,GAAGC,OAAO,CAAC,IAAI,CAACP,MAAM,GAAGG;YACpE;;;YAEOK,KAAAA;mBAAP,SAAOA,IAAIL,GAAW,EAAEM,KAAa;gBACnC,IAAI,CAACH,aAAa,GAAGI,OAAO,CAAC,IAAI,CAACV,MAAM,GAAGG,KAAKM;gBAChD,OAAOL,QAAQC,OAAO;YACxB;;;YAEOM,KAAAA;mBAAP,SAAOA,OAAOR,GAAW;gBACvB,IAAI,CAACG,aAAa,GAAGM,UAAU,CAAC,IAAI,CAACZ,MAAM,GAAGG;gBAC9C,OAAOC,QAAQC,OAAO;YACxB;;;YAEQC,KAAAA;mBAAR,SAAQA;gBACN,IAAI,IAAI,CAACL,aAAa,EAAE;oBACtB,OAAO,IAAI,CAACA,aAAa;gBAC3B;gBAEA,IAAMY,KACJ,OAAOC,WAAW,cACd,OAAOC,WAAW,cAChB,OAAOC,SAAS,cACdC,YACAD,KAAKE,YAAY,GACnBH,OAAOG,YAAY,GACrBJ,OAAOI,YAAY;gBAEzB,IAAI,CAACL,IAAI;oBACP,MAAM,IAAIM,MAAM;gBAClB;gBAEA,OAAON;YACT;;;WApCWd;IAqCZ"}